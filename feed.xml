<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Law4D Blog</title>
    <description>关于程序设计、网络安全 | Law4D，Binary &amp; Security，Software Engineer| 这里是 @Law4D 的个人博客。</description>
    <link>https://Law4D.github.io/</link>
    <atom:link href="https://Law4D.github.io/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Thu, 20 Feb 2020 11:29:40 +0800</pubDate>
    <lastBuildDate>Thu, 20 Feb 2020 11:29:40 +0800</lastBuildDate>
    <generator>Jekyll v4.0.0</generator>
    
      <item>
        <title>用GCOV和LCOV测程序覆盖率</title>
        <description>&lt;h2 id=&quot;0x0-gcov和lcov是什么&quot;&gt;0x0. GCOV和LCOV是什么？&lt;/h2&gt;

&lt;p&gt;GCOV是伴随gcc发布，用于执行测试用例生成代码覆盖率信息。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;在gcc编译和链接时加入-fprofile-arcs -ftest-coverage&lt;/li&gt;
  &lt;li&gt;GCOV主要使用.gcno和.gcda两个文件&lt;/li&gt;
  &lt;li&gt;.gcno是由-ftest-coverage产生的，它包含了重建基本块图和相应的块的源码的行号的信息。&lt;/li&gt;
  &lt;li&gt;.gcda是由加了-fprofile-arcs编译参数的编译后的文件运行所产生的，它包含了edge跳变的次数和其他的概要信息&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;LCOV是对GCOV的结果进行展示的前端，可以将覆盖率信息转换成HTML展示。&lt;/p&gt;

&lt;h2 id=&quot;0x1-如何使用gcov&quot;&gt;0x1. 如何使用GCOV？&lt;/h2&gt;

&lt;p&gt;首先编写测试程序:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;cp&quot;&gt;#include&amp;lt;stdio.h&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;scanf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;编译程序&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;test.c
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gcc &lt;span class=&quot;nt&quot;&gt;-fprofile-arcs&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-ftest-coverage&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;test.c 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.gcno
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./test 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.gcda  test.gcno
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gcov &lt;span class=&quot;nb&quot;&gt;test
&lt;/span&gt;File &lt;span class=&quot;s1&quot;&gt;'test.c'&lt;/span&gt;
Lines executed:71.43% of 7
Creating &lt;span class=&quot;s1&quot;&gt;'test.c.gcov'&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.c.gcov  test.gcda  test.gcno
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;test.c.gcov 
        -:    0:Source:test.c
        -:    0:Graph:test.gcno
        -:    0:Data:test.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include&amp;lt;stdio.h&amp;gt;
        -:    2:
    &lt;span class=&quot;c&quot;&gt;#####:    3:int add(int a, int b){&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#####:    4:  return a + b;&lt;/span&gt;
        -:    5:&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        -:    6:
        1:    7:int main&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
        1:    8:  int a, b &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 2&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        1:    9:  scanf&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%d&quot;&lt;/span&gt;, &amp;amp;a&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        1:   10:  &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%d&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;, a + b&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        1:   11:  &lt;span class=&quot;k&quot;&gt;return &lt;/span&gt;0&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        -:   12:&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中 &lt;code class=&quot;highlighter-rouge&quot;&gt;######&lt;/code&gt;表示未执行的代码&lt;/p&gt;

&lt;h2 id=&quot;0x2-如何使用lcov&quot;&gt;0x2 如何使用LCOV&lt;/h2&gt;

&lt;p&gt;我们使用同样的测试程序，然后编译和运行&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
&lt;/span&gt;test.c
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gcc &lt;span class=&quot;nt&quot;&gt;-fprofile-arcs&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-ftest-coverage&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;test &lt;/span&gt;test.c 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.gcno
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./test 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.gcda  test.gcno
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;与gcov不同的是&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;lcov &lt;span class=&quot;nt&quot;&gt;--directory&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--capture&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--output-file&lt;/span&gt; test.info
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls
test  &lt;/span&gt;test.c  test.gcda  test.gcno  test.info
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;其中&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;directory 或者-d 表示的是目录，也就是gcno和gcda目录&lt;/li&gt;
  &lt;li&gt;capture 或者 -c 表示获取覆盖率信息&lt;/li&gt;
  &lt;li&gt;output-file 或者 -o 表示输出文件&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;生成HTML&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;genhtml &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; results test.info
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x3-成果图&quot;&gt;0x3 成果图&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/img/in-post/post-notes-lcov/lcov.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 19 Feb 2020 20:12:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/19/notes_lcov/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/19/notes_lcov/</guid>
        
        <category>程序分析</category>
        
        <category>实用工具</category>
        
        
      </item>
    
      <item>
        <title>AFL学习札记(3)</title>
        <description>&lt;p&gt;本文主要对AFL的产生的大量crashes，进行分析。&lt;/p&gt;

&lt;h2 id=&quot;0x0-大量crashes处理&quot;&gt;0x0. 大量crashes处理&lt;/h2&gt;

&lt;p&gt;虽然AFL运行时的图上显示的是uniq crashes的数量，但是其实还是有许多crash触发点是&lt;code class=&quot;highlighter-rouge&quot;&gt;相同&lt;/code&gt;。例如本次实验中，出现了524个uniq crashes，其实他们可能知识前期路径不同，但是触发点还是一致，属于同一漏洞。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;┌─ process timing ─────────────────────────────────────┬─ overall results ─────┐
│        run &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt; : 1 days, 23 hrs, 12 min, 27 sec     │  cycles &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt; : 3      │
│   last new path : 0 days, 3 hrs, 59 min, 36 sec      │  total paths : 4487   │
│ last &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;crash : 0 days, 6 hrs, 15 min, 52 sec      │ &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;crashes : 524    │
│  last &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;hang : none seen yet                      │   &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;hangs : 0      │
├─ cycle progress ────────────────────┬─ map coverage ─┴───────────────────────┤
│  now processing : 4413&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;98.35%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;    │    map density : 1.43% / 6.60%         │
│ paths timed out : 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;         │ count coverage : 4.38 bits/tuple       │
├─ stage progress ────────────────────┼─ findings &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;depth ────────────────────┤
│  now trying : arith 16/8            │ favored paths : 601 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;13.39%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;           │
│ stage execs : 620k/2.30M &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;27.05%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;   │  new edges on : 1173 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;26.14%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;          │
│ total execs : 106M                  │ total crashes : 1.55M &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;524 unique&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;     │
│  &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;speed : 102.2/sec             │  total tmouts : 32.5k &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;130 unique&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;     │
├─ fuzzing strategy yields ───────────┴───────────────┬─ path geometry ────────┤
│   bit flips : 763/4.15M, 224/4.15M, 120/4.15M       │    levels : 40         │
│  byte flips : 12/518k, 7/398k, 9/412k               │   pending : 3027       │
│ arithmetics : 474/21.8M, 52/18.0M, 17/14.7M         │  pend fav : 3          │
│  known ints : 35/1.36M, 133/5.61M, 202/10.4M        │ own finds : 4485       │
│  dictionary : 0/0, 0/0, 155/10.3M                   │  imported : n/a        │
│       havoc : 2806/9.87M, 0/0                       │ stability : 100.00%    │
│        trim : 0.11%/123k, 24.46%                    ├────────────────────────┘
└─────────────────────────────────────────────────────┘          &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;cpu001: 25%]
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x1-使用address-sanitizie选项编译&quot;&gt;0x1. 使用Address-Sanitizie选项编译&lt;/h2&gt;

&lt;p&gt;这里还是需要Address-Sanitizie这款厉害的工具，再次对源代码进行编译，将AFL_USE_ASAN置为1。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;sources/
&lt;span class=&quot;nv&quot;&gt;$ AFL_USE_ASAN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 ./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-gcc &lt;span class=&quot;nv&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/install &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-g++ 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j16&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x2-查找问题所在&quot;&gt;0x2. 查找问题所在&lt;/h2&gt;

&lt;p&gt;使用了Address-Sanitizier选项后，运行得到如下信息：&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;19950&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;ERROR: AddressSanitizer: attempting free on address which was not malloc&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ed&lt;/span&gt;: 0x61e00000f4e0 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;thread T0
    &lt;span class=&quot;c&quot;&gt;#0 0x7f063b6522ca in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x982ca)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#1 0x958046 in _bfd_coff_free_symbols /home/ubuntu/xxx/sources/binutils-2.34/bfd/coffgen.c:1782&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#2 0x958046 in _bfd_coff_close_and_cleanup /home/ubuntu/xxx/sources/binutils-2.34/bfd/coffgen.c:3180&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#3 0x637038 in bfd_close_all_done /home/ubuntu/xxx/sources/binutils-2.34/bfd/opncls.c:789&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#4 0x41165e in display_file objdump.c:5016&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#5 0x41165e in main objdump.c:5349&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#6 0x7f063b00c82f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#7 0x4153b8 in _start (/home/ubuntu/xxx/proven/binutils/bin/objdump+0x4153b8)&lt;/span&gt;

0x61e00000f4e0 is located 1120 bytes inside of 2594-byte region &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0x61e00000f080,0x61e00000faa2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
allocated by thread T0 here:
    &lt;span class=&quot;c&quot;&gt;#0 0x7f063b65279a in __interceptor_calloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x9879a)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#1 0x62963a in bfd_malloc /home/ubuntu/xxx/sources/binutils-2.34/bfd/libbfd.c:275&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#2 0x62963a in bfd_zmalloc /home/ubuntu/xxx/sources/binutils-2.34/bfd/libbfd.c:360&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;使用python脚本对所有crashes进行遍历，得到确确实实的uniq crashes，齐活🤓&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;re&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;elf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;input_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;uniq_crashes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;uniq_seed&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
    
    &lt;span class=&quot;n&quot;&gt;input_files&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;listdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;r&quot;SUMMARY: AddressSanitizer: (.*)&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_files&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;popen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{} {}&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;elf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input_dir&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cur&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;vul&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;re&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;findall&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vul&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;uniq_crashes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;uniq_crashes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vul&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;uniq_seed&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x3-后记&quot;&gt;0x3. 后记&lt;/h2&gt;

&lt;p&gt;不得不说AddressSanitizer非常之厉害，使用之后，能够快速定位漏洞原因所在。&lt;/p&gt;

</description>
        <pubDate>Sat, 15 Feb 2020 20:00:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/15/afl_fuzzing_3/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/15/afl_fuzzing_3/</guid>
        
        <category>AFL学习</category>
        
        
      </item>
    
      <item>
        <title>函数内联的那些事(1)</title>
        <description>&lt;h2 id=&quot;0x0-函数内联是什么&quot;&gt;0x0. 函数内联是什么？&lt;/h2&gt;

&lt;p&gt;函数内联的是为了解决程序中函数调用的效率问题提出的一种编译策略。程序在编译器编译的时候， 编译器将程序中内联函数的调用表达式用内联函数的函数体来进行替换。使用空间代价换取更快的函数调用。&lt;/p&gt;

&lt;h2 id=&quot;0x1-函数内联对程序分析的影响&quot;&gt;0x1. 函数内联对程序分析的影响&lt;/h2&gt;

&lt;p&gt;函数内联对程序分析影响如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;改变函数控制流图(CFG)&lt;/li&gt;
  &lt;li&gt;可能额外引入源代码中没有的常量&lt;/li&gt;
  &lt;li&gt;与原函数产生较大差异&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;因此，我准备看看不同编译优化选项，函数内联到底有多少。&lt;/p&gt;

&lt;h2 id=&quot;0x2-函数内联统计&quot;&gt;0x2 函数内联统计&lt;/h2&gt;

&lt;h3 id=&quot;0x21-测试环境&quot;&gt;0x2.1 测试环境&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;系统：Ubuntu 16.04&lt;/li&gt;
  &lt;li&gt;编译器：GCC 5.4&lt;/li&gt;
  &lt;li&gt;测试目标：Binutils&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;0x22-测试方法&quot;&gt;0x2.2 测试方法&lt;/h3&gt;

&lt;p&gt;使用同一编译器，不同编译优化选项进行进行编译；然后比较同名文件不同优化选项的内联情况。这里假设O0可执行文件未进行内联优化。&lt;/p&gt;

&lt;h3 id=&quot;0x23-统计结果&quot;&gt;0x2.3 统计结果&lt;/h3&gt;

&lt;p&gt;我们对binutils中ld, elfedit, c++filt, objdump, gprof, readelf, ranlib, as, ar, strip, nm, addr2line, objcopy, strings, size等可执行文件进行统计。&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;O0&lt;/th&gt;
      &lt;th&gt;01&lt;/th&gt;
      &lt;th&gt;O2&lt;/th&gt;
      &lt;th&gt;03&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;O0&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;O1&lt;/td&gt;
      &lt;td&gt;27.3%&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;O2&lt;/td&gt;
      &lt;td&gt;28.3%&lt;/td&gt;
      &lt;td&gt;18.9%&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;O3&lt;/td&gt;
      &lt;td&gt;33.3%&lt;/td&gt;
      &lt;td&gt;31.6%&lt;/td&gt;
      &lt;td&gt;26.2%&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;0x3-讨论&quot;&gt;0x3 讨论&lt;/h2&gt;

&lt;p&gt;本以为，函数内联在编译中出现频率会比较低，通过实验表明，在编译时会有相当一部分的函数被编译器内联。因此在进行二进制程序分析时，应当对函数内联进行一定的处理。&lt;/p&gt;
</description>
        <pubDate>Fri, 14 Feb 2020 20:12:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/14/function_inline/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/14/function_inline/</guid>
        
        <category>程序分析</category>
        
        <category>软件同源</category>
        
        
      </item>
    
      <item>
        <title>AFL学习札记(2)</title>
        <description>&lt;p&gt;本文主要对AFL的crashes，进行简单的分析。&lt;/p&gt;

&lt;h2 id=&quot;0x0-获取crashes&quot;&gt;0x0. 获取crashes&lt;/h2&gt;

&lt;p&gt;操作简单，采用AFL，OSS-Fuzz等工具产生。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/google/AFL&quot;&gt;American Fuzzy Lop&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/google/oss-fuzz&quot;&gt;oss-fuzz&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;0x1-使用address-sanitizie选项编译&quot;&gt;0x1. 使用Address-Sanitizie选项编译&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;ASAN（Address-Sanitizier）早先是LLVM中的特性，后被加入GCC 4.8，在GCC 4.9后加入对ARM平台的支持。因此GCC 4.8以上版本使用ASAN时不需要安装第三方库，通过在编译时指定编译CFLAGS即可打开开关。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;再次对源代码进行编译，依然以binutils-2.34为例，将AFL_USE_ASAN置为1。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;binutils-2.34
&lt;span class=&quot;nv&quot;&gt;$ AFL_USE_ASAN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 ./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-gcc &lt;span class=&quot;nv&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/install &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-g++ 
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j16&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x2-查找问题所在&quot;&gt;0x2. 查找问题所在&lt;/h2&gt;

&lt;p&gt;运行产生crashes的样例。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./objdump &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; sample 

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;19950&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;ERROR: AddressSanitizer: attempting free on address which was not malloc&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-ed&lt;/span&gt;: 0x61e00000f4e0 &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;thread T0
    &lt;span class=&quot;c&quot;&gt;#0 0x7f063b6522ca in __interceptor_free (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x982ca)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#1 0x958046 in _bfd_coff_free_symbols /home/ubuntu/xxx/sources/binutils-2.34/bfd/coffgen.c:1782&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#2 0x958046 in _bfd_coff_close_and_cleanup /home/ubuntu/xxx/sources/binutils-2.34/bfd/coffgen.c:3180&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#3 0x637038 in bfd_close_all_done /home/ubuntu/xxx/sources/binutils-2.34/bfd/opncls.c:789&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#4 0x41165e in display_file objdump.c:5016&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#5 0x41165e in main objdump.c:5349&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#6 0x7f063b00c82f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#7 0x4153b8 in _start (/home/ubuntu/xxx/proven/binutils/bin/objdump+0x4153b8)&lt;/span&gt;

0x61e00000f4e0 is located 1120 bytes inside of 2594-byte region &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;0x61e00000f080,0x61e00000faa2&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
allocated by thread T0 here:
    &lt;span class=&quot;c&quot;&gt;#0 0x7f063b65279a in __interceptor_calloc (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x9879a)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#1 0x62963a in bfd_malloc /home/ubuntu/xxx/sources/binutils-2.34/bfd/libbfd.c:275&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;#2 0x62963a in bfd_zmalloc /home/ubuntu/xxx/sources/binutils-2.34/bfd/libbfd.c:360&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;目测问题出在了binutils-2.34/bfd/libbfd.c:275和binutils-2.34/bfd/libbfd.c:360，这里没有细分析。&lt;/p&gt;

&lt;h2 id=&quot;0x3-后记&quot;&gt;0x3. 后记&lt;/h2&gt;

&lt;p&gt;实际中crashes并不是经常能遇见，所以难度往往集中在第0x0步，预祝crashes天天有。&lt;/p&gt;

</description>
        <pubDate>Wed, 12 Feb 2020 16:00:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/12/afl_fuzzing_2/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/12/afl_fuzzing_2/</guid>
        
        <category>AFL学习</category>
        
        
      </item>
    
      <item>
        <title>AFL学习札记(1)</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;American Fuzzy Lop is a brute-force fuzzer coupled with an exceedingly simple but rock-solid instrumentation-guided genetic algorithm. It uses a modified form of edge coverage to effortlessly pick up subtle, local-scale changes to program control flow.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;AFL是由Google开发用于模糊测试的工具，可以说是当前最成功的模糊测试工具之一，无论是安全顶会还是软工定顶会都能看到AFL的身影。因此，本文对AFL进行学习。&lt;/p&gt;

&lt;h2 id=&quot;0x0-安装afl&quot;&gt;0x0. 安装AFL&lt;/h2&gt;

&lt;p&gt;安装AFL主要有两种方法，本文选第二种🤓，注意：新鲜的Ubuntu可能需要安装编译环境，另外设置PREFIX&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;apt-get install afl&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/google/AFL&quot;&gt;GitHub下载&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;build-essential
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;make
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;texinfo
&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/google/AFL.git
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;afl
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi Makefile
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi ~/.bash_profile
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.bash_profile
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;安装在PREFIX目录里&lt;/p&gt;

&lt;h2 id=&quot;0x1-下载测试用例&quot;&gt;0x1. 下载测试用例&lt;/h2&gt;

&lt;p&gt;见&lt;a href=&quot;/2020/02/10/compile_binaries/&quot;&gt;各种测试小程序编译&lt;/a&gt;，本文以binutils为例。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://mirrors.syringanetworks.net/gnu/binutils/binutils-2.34.tar.xz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; binutils-2.34.tar.xz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;binutils-2.34
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-gcc &lt;span class=&quot;nv&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/../binutils &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;afl-g++
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j16&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;测试用例编译完成&lt;/p&gt;

&lt;h2 id=&quot;0x2-模糊测试&quot;&gt;0x2. 模糊测试&lt;/h2&gt;

&lt;p&gt;首先对Ubuntu进行配置&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;su
&lt;span class=&quot;c&quot;&gt;# echo core &amp;gt;/proc/sys/kernel/core_pattern&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# cd /sys/devices/system/cpu&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# echo performance | tee cpu*/cpufreq/scaling_governor&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# exit&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;开始测试&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ../binutils/bin
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;afl-fuzz &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; ~/law4d/testcases/input/binutils &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; ~/law4d/testcases/output/readelf/0 ./readelf - @@
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;afl-fuzz &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; ~/law4d/testcases/input/binutils &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; ~/law4d/testcases/output/readelf/1 ./readelf &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; @@
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;运气好的话，就能发现crashes&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;┌─ process timing ─────────────────────────────────────┬─ overall results ─────┐
│        run &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt; : 0 days, 0 hrs, 26 min, 23 sec      │  cycles &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt; : 10     │
│   last new path : 0 days, 0 hrs, 0 min, 10 sec       │  total paths : 801    │
│ last &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;crash : 0 days, 0 hrs, 11 min, 11 sec      │ &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;crashes : 12     │
│  last &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;hang : none seen yet                      │   &lt;span class=&quot;nb&quot;&gt;uniq &lt;/span&gt;hangs : 0      │
├─ cycle progress ────────────────────┬─ map coverage ─┴───────────────────────┤
│  now processing : 34 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;4.24%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;        │    map density : 0.59% / 3.04%         │
│ paths timed out : 0 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;0.00%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;         │ count coverage : 2.63 bits/tuple       │
├─ stage progress ────────────────────┼─ findings &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;depth ────────────────────┤
│  now trying : havoc                 │ favored paths : 249 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;31.09%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;           │
│ stage execs : 207/256 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;80.86%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;      │  new edges on : 322 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;40.20%&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;           │
│ total execs : 1.81M                 │ total crashes : 46 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;11 unique&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;         │
│  &lt;span class=&quot;nb&quot;&gt;exec &lt;/span&gt;speed : 1153/sec              │  total tmouts : 13 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;3 unique&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;          │
├─ fuzzing strategy yields ───────────┴───────────────┬─ path geometry ────────┤
│   bit flips : n/a, n/a, n/a                         │    levels : 14         │
│  byte flips : n/a, n/a, n/a                         │   pending : 345        │
│ arithmetics : n/a, n/a, n/a                         │  pend fav : 0          │
│  known ints : n/a, n/a, n/a                         │ own finds : 793        │
│  dictionary : n/a, n/a, n/a                         │  imported : n/a        │
│       havoc : 503/812k, 301/922k                    │ stability : 100.00%    │
│        trim : 59.75%/66.7k, n/a                     ├────────────────────────┘
└─────────────────────────────────────────────────────┘          &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;cpu001: 19%]
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;0x3-种子选取&quot;&gt;0x3. 种子选取&lt;/h2&gt;

&lt;p&gt;种子对Fuzzing的影响非常大，因此使用好的种子能够快速发现crashes。2019年顶会USENIX Security发表的《MOPT: Optimized Mutation Scheduling for Fuzzers》中提供了若干种子。&lt;/p&gt;

&lt;p&gt;下载地址：&lt;a href=&quot;https://github.com/puppet-meteor/MOpt-AFL&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 11 Feb 2020 16:00:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/11/afl_fuzzing/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/11/afl_fuzzing/</guid>
        
        <category>AFL学习</category>
        
        
      </item>
    
      <item>
        <title>各种测试小程序编译(1)</title>
        <description>&lt;p&gt;在程序分析时需要用到许多开源测试程序，本文主要介绍一些开源程序的编译和安装。&lt;/p&gt;

&lt;h2 id=&quot;0x0-binutils&quot;&gt;0x0. Binutils&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;The GNU Binutils are a collection of binary tools.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://ftp.gnu.org/gnu/binutils&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.gnu.org/software/binutils/&quot;&gt;官网地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://mirrors.syringanetworks.net/gnu/binutils/binutils-2.34.tar.xz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; binutils-2.34.tar.xz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;binutils-2.34
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;aarch64-linux-gnu-gcc-5 &lt;span class=&quot;nv&quot;&gt;AR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;aarch64-linux-gnu-ar &lt;span class=&quot;nt&quot;&gt;--host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;aarch64-linux &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/install &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;aarch64-linux-gnu-g++-5
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;所示为，交叉编译到Aarch64系统👽&lt;/p&gt;

&lt;h2 id=&quot;0x1-bison&quot;&gt;0x1. Bison&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;Bison is a general-purpose parser generator that converts an annotated context-free grammar into a deterministic LR or generalized LR (GLR) parser employing LALR(1) parser tables.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://ftp.gnu.org/gnu/bison/&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.gnu.org/software/bison/&quot;&gt;官网地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;http://gnu.spinellicreations.com/bison/bison-3.5.tar.xz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; bison-3.5.tar.xz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;bison-3.5
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mips64-linux-gnuabi64-gcc-5 &lt;span class=&quot;nv&quot;&gt;AR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mips64-linux-gnuabi64-ar &lt;span class=&quot;nt&quot;&gt;--host&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mips64-linux &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/install &lt;span class=&quot;nv&quot;&gt;CXXFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;mips64-linux-gnuabi64-g++-5
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;所示为，交叉编译到mips64系统👽&lt;/p&gt;

&lt;h2 id=&quot;0x2-ffmpeg&quot;&gt;0x2. FFmpeg&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;A complete, cross-platform solution to record, convert and stream audio and video.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://ffmpeg.org/download.html&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ffmpeg.org&quot;&gt;官网地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;注意：configure 参数有所不同&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://ffmpeg.org/releases/ffmpeg-4.2.2.tar.bz2&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; ffmpeg-4.2.2.tar.bz2
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ffmpeg-4.2.2
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nt&quot;&gt;--disable-inline-asm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--disable-x86asm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$PWD&lt;/span&gt;/install
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;所示为，得到使用静态链接、未函数内联的可执行文件👽&lt;/p&gt;

&lt;h2 id=&quot;0x3-imagemagick&quot;&gt;0x3. ImageMagick&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;ImageMagick is free software delivered as a ready-to-run binary distribution or as source code that you may use, copy, modify, and distribute in both open and proprietary applications.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://imagemagick.org/script/install-source.php&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://imagemagick.org/&quot;&gt;官网地址&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://imagemagick.org/download/ImageMagick.tar.gz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; ImageMagick.tar.gz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;ImageMagick-7.0.9-22
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./configure &lt;span class=&quot;nv&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-O0&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; make &lt;span class=&quot;nb&quot;&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;编译完成👽&lt;/p&gt;

&lt;h2 id=&quot;0x4-gif2png&quot;&gt;0x4. gif2png&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;The gif2png program converts files from the Graphic Interchange Format (GIF) to Portable Network Graphics (PNG).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://gitlab.com/esr/gif2png&quot;&gt;下载地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.catb.org/~esr/gif2png/&quot;&gt;官网地址&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;注意：3.0.0已改成Go语言&lt;/li&gt;
  &lt;li&gt;xmlto若未安装可以将其注释&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-O&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;https://gitlab.com/esr/gif2png/-/archive/2.5.14/gif2png-2.5.14.tar.gz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-xvf&lt;/span&gt; gif2png-2.5.14.tar.gz
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;gif2png-2.5.14
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;make &lt;span class=&quot;nt&quot;&gt;-j4&lt;/span&gt; 
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;编译完成&lt;/p&gt;

</description>
        <pubDate>Mon, 10 Feb 2020 16:00:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/10/compile_binaries/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/10/compile_binaries/</guid>
        
        <category>测试程序</category>
        
        <category>安装笔记</category>
        
        <category>交叉编译</category>
        
        
      </item>
    
      <item>
        <title>Windows Server 2012 R2安装VC++2015运行库</title>
        <description>&lt;p&gt;最近需要在Windows Server 2012 R12上搭建某程序的运行环境，遇到缺失MSVCP140.dll问题，现总结如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;MSVCP140.dll缺失，安装&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=48145&quot;&gt;VC++2015运行库&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;MSVCP120.dll缺失，安装VC++2013运行库&lt;/li&gt;
  &lt;li&gt;MSVCP110.dll缺失，安装VC++2012运行库&lt;/li&gt;
  &lt;li&gt;MSVCP100.dll缺失，安装VC++2010运行库&lt;/li&gt;
  &lt;li&gt;MSVCP90.dll缺失，安装VC++2008运行库&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;本以为问题如此简单，准备结束🎉时，结果安装VC++2015运行库时出现了问题。&lt;/p&gt;

&lt;p&gt;0x80240017 - 未指定错误。&lt;/p&gt;

&lt;h1 id=&quot;vc2015运行库安装&quot;&gt;VC++2015运行库安装&lt;/h1&gt;

&lt;p&gt;查看日志，发现&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Windows8.1-KB2999226-x64.msu Failed to execute MSU package&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;老老实实打开目录手动安装Windows8.1-KB2999226-x64，提示不适合此计算机。查询之后，提示需要先打上&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=42334&quot;&gt;KB2919355补丁&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;安装kb2919355补丁&quot;&gt;安装KB2919355补丁&lt;/h2&gt;

&lt;p&gt;访问microsoft官网下载，安装，依然不适合此计算机，再次查询，提示安装&lt;a href=&quot;https://www.microsoft.com/en-us/download/details.aspx?id=42334&quot;&gt;KB2919355补丁&lt;/a&gt;补丁需要先打上&lt;a href=&quot;https://www.microsoft.com/zh-cn/download/details.aspx?id=42153&quot;&gt;KB2919442&lt;/a&gt;。俄罗斯套娃? :(&lt;/p&gt;

&lt;h2 id=&quot;安装kb2919442补丁&quot;&gt;安装KB2919442补丁&lt;/h2&gt;

&lt;p&gt;下载安装KB2919442补丁，安装成功，return上一步，最终安装VC++2015运行库成功。完毕🤓&lt;/p&gt;

</description>
        <pubDate>Sun, 09 Feb 2020 08:12:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/09/installer_vcredist/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/09/installer_vcredist/</guid>
        
        <category>安装笔记</category>
        
        <category>MISC</category>
        
        
      </item>
    
      <item>
        <title>Github Pages 博客搭建</title>
        <description>&lt;p&gt;&lt;a href=&quot;https://pages.github.com&quot;&gt;Github Pages&lt;/a&gt;是Github免费提供的静态网站托管服务，不需要任何后端语言来支持。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;仓库空间不大于1G&lt;/li&gt;
  &lt;li&gt;每个月的流量不超过100G&lt;/li&gt;
  &lt;li&gt;每小时更新不超过 10 次&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;本文主要介绍如何使用Jekyll搭建个人Github Pages。&lt;/p&gt;

&lt;h1 id=&quot;jekyll是什么&quot;&gt;Jekyll是什么？&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;Jekyll 是一个简单的博客形态的静态站点生产机器。它有一个模版目录，其中包含原始文本格式的文档，通过一个转换器（如 Markdown）和我们的 Liquid 渲染器转化成一个完整的可发布的静态网站，你可以发布在任何你喜爱的服务器上。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;选择Jekyll后，可以更加专注于博客内容本身，把网页排版交给Jekyll完成 :P&lt;/p&gt;

&lt;h1 id=&quot;更新ruby&quot;&gt;更新Ruby&lt;/h1&gt;

&lt;p&gt;首先查看ruby的版本，本文安装的jekyll 4.0.0要求ruby版本2.4.0以上。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;如果版本低于2.4.0，需要先更新ruby版本。这里我们可以使用RVM进行ruby的版本管理和更新。&lt;/p&gt;

&lt;h3 id=&quot;安装rvm&quot;&gt;安装RVM&lt;/h3&gt;

&lt;p&gt;本文采用的是离线安装RVM，上Github下载&lt;a href=&quot;https://github.com/rvm/rvm.git&quot;&gt;RVM&lt;/a&gt;。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/rvm/rvm.git rvm
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;rvm/bin
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;./rvm-installer
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;安装好之后在.bash_profile最后追加&lt;/p&gt;

&lt;p&gt;export PATH=$PATH:/Users/xxx/.rvm/&lt;/p&gt;

&lt;p&gt;其中xxx为当前用户名&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ~/
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;vi .bash_profile
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;source&lt;/span&gt; ~/.bash_profile
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;到此RVM安装完成。&lt;/p&gt;

&lt;h3 id=&quot;安装ruby-240&quot;&gt;安装ruby 2.4.0&lt;/h3&gt;

&lt;p&gt;列出可安装的ruby版本，并安装满足条件的ruby&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm list known
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]1.8.6[-p420]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]1.8.7[-head] &lt;span class=&quot;c&quot;&gt;# security released on head&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]1.9.1[-p431]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]1.9.2[-p330]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]1.9.3[-p551]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.0.0[-p648]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.1[.10]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.2[.10]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.3[.8]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.4[.9]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.5[.7]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.6[.5]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;ruby-]2.7[.0]
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;rvm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;2.4
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后等待漫长的安装过程，因为可能需要许多依赖包，因此时间有点长。最后检查是否安装完成。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;ruby &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;
ruby 2.4.9p362 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;2019-10-02 revision 67824&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;安装jekyll&quot;&gt;安装Jekyll&lt;/h1&gt;

&lt;p&gt;至此，可以开始安装Jekyll，如果在OSX平台上，可以直接输入&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gem &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;jekyll
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;最后等着安装完成。最后编译博客的工具安装完成！🎉&lt;/p&gt;

&lt;h1 id=&quot;建立一个测试样例&quot;&gt;建立一个测试样例&lt;/h1&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;jekyll new myblog
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;tree myblog/
myblog/
├── 404.html
├── Gemfile
├── Gemfile.lock
├── _config.yml
├── _posts
│   └── 2020-02-08-welcome-to-jekyll.markdown
├── about.markdown
└── index.markdown
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在线运行，热修改可以使用&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;jekyll serve
  Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;github-pages&quot;&gt;Github Pages&lt;/h1&gt;

&lt;p&gt;去Github主页建立一个新的repository，命名为username.github.io，username为用户ID。&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;table class=&quot;rouge-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;rouge-gutter gl&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;rouge-code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git clone https://github.com/law4D/law4D.github.io.git law4D.github.io
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;myblog
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;jekyll build &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; ../law4D.github.io
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ../law4D.github.io
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git add &lt;span class=&quot;nt&quot;&gt;--all&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;first commit&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;git push &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; origin master
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sat, 08 Feb 2020 20:12:00 +0800</pubDate>
        <link>https://Law4D.github.io/2020/02/08/installer_githubPages/</link>
        <guid isPermaLink="true">https://Law4D.github.io/2020/02/08/installer_githubPages/</guid>
        
        <category>安装笔记</category>
        
        <category>MISC</category>
        
        
      </item>
    
  </channel>
</rss>
